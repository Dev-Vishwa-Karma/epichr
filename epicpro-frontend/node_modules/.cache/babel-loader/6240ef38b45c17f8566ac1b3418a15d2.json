{"ast":null,"code":"var _jsxFileName = \"/opt/lampp/htdocs/epicpro-frontend/src/components/HRMS/Activities/Activities.js\";\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport Ckeditor from '../../common/ckeditor';\nimport { useState } from \"react\";\n\nclass Activities extends Component {\n  constructor(props) {\n    super(props);\n\n    this.handleStatusChange = event => {\n      this.setState({\n        selectedStatus: event.target.value\n      });\n    };\n\n    this.addBreak = () => {\n      // Validate form inputs\n      if (!employeeId || !firstName || !email || !username) {\n        alert(\"Please fill in all fields\");\n        return;\n      }\n\n      const addUserData = new FormData();\n      addUserData.append('employee_id', employeeId);\n      addUserData.append('first_name', firstName);\n      addUserData.append('last_name', lastName);\n      addUserData.append('email', email);\n      addUserData.append('mobile_no', mobileNo);\n      addUserData.append('selected_role', selectedRole);\n      addUserData.append('username', username);\n      addUserData.append('password', confirmPassword); // API call to add user\n\n      fetch(`${process.env.REACT_APP_API_URL}/users.php?action=add`, {\n        method: \"POST\",\n        body: addUserData\n      }).then(response => response.json()).then(data => {\n        if (data.status === \"success\") {\n          // Update the department list\n          this.setState(prevState => ({\n            users: [...(prevState.users || []), data.data],\n            // Assuming the backend returns the new department\n            employeeId: \"\",\n            firstName: \"\",\n            lastName: \"\",\n            email: \"\",\n            mobileNo: \"\",\n            selectedRole: \"\",\n            username: \"\",\n            password: \"\",\n            confirmPassword: \"\"\n          }));\n        } else {\n          console.log(\"Failed to add user\");\n        }\n      }).catch(error => console.error(\"Error:\", error));\n    };\n\n    this.state = {\n      activities: [],\n      error: null,\n      employeeData: [],\n      selectedStatus: \"\" // State for dropdown selection\n\n    };\n  }\n\n  componentDidMount() {\n    // Make the GET API call when the component is mounted\n    // fetch('http://localhost/react/epicpro-backend/users.php')\n    fetch(`${process.env.REACT_APP_API_URL}/activities.php`).then(response => response.json()).then(data => {\n      if (data.status === 'success') {\n        this.setState({\n          activities: data.data\n        });\n      } else {\n        this.setState({\n          error: data.message\n        });\n      }\n    }).catch(err => {\n      this.setState({\n        error: 'Failed to fetch data'\n      });\n      console.error(err);\n    });\n    /** Get employees list */\n\n    fetch(`${process.env.REACT_APP_API_URL}/get_employees.php`).then(response => response.json()).then(data => {\n      if (data.status === 'success') {\n        this.setState({\n          employeeData: data.data\n        });\n      } else {\n        this.setState({\n          error: data.message\n        });\n      }\n    }).catch(err => {\n      this.setState({\n        error: 'Failed to fetch data'\n      });\n      console.error(err);\n    });\n  } // Handle dropdown change\n\n\n  render() {\n    const {\n      fixNavbar\n    } = this.props;\n    const {\n      activities,\n      error,\n      employeeData,\n      selectedStatus\n    } = this.state;\n    return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 5\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: `section-body ${fixNavbar ? \"marginTop\" : \"\"} mt-3`,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 6\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"container-fluid\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row clearfix\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 8\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-12\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 110,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"card\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 10\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"card-header\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"h3\", {\n      className: \"card-title\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 12\n      }\n    }, \"Timeline Activity\"), /*#__PURE__*/React.createElement(\"button\", {\n      type: \"button\",\n      className: \"btn btn-primary\",\n      \"data-toggle\": \"modal\",\n      \"data-target\": \"#addBreakModal\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 12\n      }\n    }, /*#__PURE__*/React.createElement(\"i\", {\n      className: \"fe fe-plus mr-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 111\n      }\n    }), \"Add Break\")), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"card-body\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"summernote\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 12\n      }\n    }), activities.length > 0 ? activities.map((activity, index) => /*#__PURE__*/React.createElement(\"div\", {\n      className: \"timeline_item \",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 14\n      }\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      className: \"tl_avatar\",\n      src: \"../assets/images/xs/avatar1.jpg\",\n      alt: \"fake_url\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 122,\n        columnNumber: 15\n      }\n    }), /*#__PURE__*/React.createElement(\"span\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 127,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"a\", {\n      href: \"#\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 128,\n        columnNumber: 16\n      }\n    }, activity.first_name, \" \", activity.last_name), \" \", activity.location, /*#__PURE__*/React.createElement(\"small\", {\n      className: \"float-right text-right\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 129,\n        columnNumber: 16\n      }\n    }, activity.formatted_date)), /*#__PURE__*/React.createElement(\"h6\", {\n      className: \"font600\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 133,\n        columnNumber: 15\n      }\n    }, \"(\", activity.break_status, \") \", activity.break_reason))) : error && /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 139,\n        columnNumber: 22\n      }\n    }, error))))))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"modal fade\",\n      id: \"addBreakModal\",\n      tabIndex: -1,\n      role: \"dialog\",\n      \"aria-labelledby\": \"addBreakModalLabel\"\n      /* aria-hidden=\"true\" */\n      ,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 149,\n        columnNumber: 6\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"modal-dialog\",\n      role: \"break\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 150,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"modal-content\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 151,\n        columnNumber: 8\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"modal-header\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 152,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"h5\", {\n      className: \"modal-title\",\n      id: \"addBreakModalLabel\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 153,\n        columnNumber: 10\n      }\n    }, \"Add Break\"), /*#__PURE__*/React.createElement(\"button\", {\n      type: \"button\",\n      className: \"close\",\n      \"data-dismiss\": \"modal\",\n      \"aria-label\": \"Close\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 154,\n        columnNumber: 10\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      \"aria-hidden\": \"true\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 154,\n        columnNumber: 90\n      }\n    }, \"\\xD7\"))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"modal-body\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 156,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row clearfix\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 157,\n        columnNumber: 10\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-12\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 158,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 159,\n        columnNumber: 12\n      }\n    }, /*#__PURE__*/React.createElement(\"select\", {\n      className: \"form-control show-tick\",\n      name: \"employee\",\n      id: \"emp_id\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 160,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"option\", {\n      value: \"\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 161,\n        columnNumber: 13\n      }\n    }, \"Select Employee\"), employeeData.length > 0 ? employeeData.map((employee, index) => /*#__PURE__*/React.createElement(\"option\", {\n      value: employee.id,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 164,\n        columnNumber: 19\n      }\n    }, `${employee.first_name} ${employee.last_name}`)) : !error && /*#__PURE__*/React.createElement(\"option\", {\n      value: \"\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 167,\n        columnNumber: 24\n      }\n    }, \"Select Employee\")))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-12\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 172,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 173,\n        columnNumber: 12\n      }\n    }, /*#__PURE__*/React.createElement(\"select\", {\n      className: \"form-control show-tick\",\n      name: \"status\",\n      id: \"break_status\",\n      value: selectedStatus,\n      onChange: this.handleStatusChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 174,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"option\", {\n      value: \"\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 175,\n        columnNumber: 14\n      }\n    }, \"Select Status\"), /*#__PURE__*/React.createElement(\"option\", {\n      value: \"active\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 176,\n        columnNumber: 14\n      }\n    }, \"Break In\"), /*#__PURE__*/React.createElement(\"option\", {\n      value: \"completed\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 177,\n        columnNumber: 14\n      }\n    }, \"Break Out\")))), selectedStatus === \"active\" && /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-12\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 182,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 183,\n        columnNumber: 12\n      }\n    }, /*#__PURE__*/React.createElement(\"textarea\", {\n      className: \"form-control\",\n      name: \"reason\",\n      placeholder: \"Reason\",\n      \"aria-label\": \"With textarea\",\n      id: \"break_reason\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 184,\n        columnNumber: 12\n      }\n    }))))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"modal-footer\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 190,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      type: \"button\",\n      className: \"btn btn-secondary\",\n      \"data-dismiss\": \"modal\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 191,\n        columnNumber: 10\n      }\n    }, \"Close\"), /*#__PURE__*/React.createElement(\"button\", {\n      type: \"button\",\n      className: \"btn btn-primary\",\n      onClick: this.addBreak,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 192,\n        columnNumber: 10\n      }\n    }, \"Save changes\")))))));\n  }\n\n}\n\nconst mapStateToProps = state => ({\n  fixNavbar: state.settings.isFixNavbar\n});\n\nconst mapDispatchToProps = dispatch => ({});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Activities);","map":{"version":3,"sources":["/opt/lampp/htdocs/epicpro-frontend/src/components/HRMS/Activities/Activities.js"],"names":["React","Component","connect","Ckeditor","useState","Activities","constructor","props","handleStatusChange","event","setState","selectedStatus","target","value","addBreak","employeeId","firstName","email","username","alert","addUserData","FormData","append","lastName","mobileNo","selectedRole","confirmPassword","fetch","process","env","REACT_APP_API_URL","method","body","then","response","json","data","status","prevState","users","password","console","log","catch","error","state","activities","employeeData","componentDidMount","message","err","render","fixNavbar","length","map","activity","index","first_name","last_name","location","formatted_date","break_status","break_reason","employee","id","mapStateToProps","settings","isFixNavbar","mapDispatchToProps","dispatch"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport Ckeditor from '../../common/ckeditor';\r\nimport { useState } from \"react\";\r\nclass Activities extends Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.state = {\r\n\t\t\tactivities: [],\r\n\t\t\terror: null,\r\n\t\t\temployeeData: [],\r\n\t\t\tselectedStatus: \"\" // State for dropdown selection\r\n\t\t};\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n\t\t// Make the GET API call when the component is mounted\r\n\t\t// fetch('http://localhost/react/epicpro-backend/users.php')\r\n\t\tfetch(`${process.env.REACT_APP_API_URL}/activities.php`)\r\n\t\t\t.then(response => response.json())\r\n\t\t\t.then(data => {\r\n\t\t\t\tif (data.status === 'success') {\r\n\t\t\t\t\tthis.setState({ activities: data.data });\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.setState({ error: data.message });\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\t.catch(err => {\r\n\t\t\t\tthis.setState({ error: 'Failed to fetch data' });\r\n\t\t\t\tconsole.error(err);\r\n\t\t\t});\r\n\r\n\t\t/** Get employees list */\r\n\t\tfetch(`${process.env.REACT_APP_API_URL}/get_employees.php`)\r\n\t\t\t.then(response => response.json())\r\n\t\t\t.then(data => {\r\n\t\t\t\tif (data.status === 'success') {\r\n\t\t\t\t\tthis.setState({ employeeData: data.data });\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.setState({ error: data.message });\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\t.catch(err => {\r\n\t\t\t\tthis.setState({ error: 'Failed to fetch data' });\r\n\t\t\t\tconsole.error(err);\r\n\t\t\t});\r\n\t}\r\n\r\n\t// Handle dropdown change\r\n\thandleStatusChange = (event) => {\r\n\t\tthis.setState({ selectedStatus: event.target.value });\r\n\t};\r\n\r\n\taddBreak = () => {\r\n\r\n        // Validate form inputs\r\n        if (!employeeId || !firstName || !email || !username) {\r\n            alert(\"Please fill in all fields\");\r\n            return;\r\n        }\r\n\r\n        const addUserData = new FormData();\r\n        addUserData.append('employee_id', employeeId);\r\n        addUserData.append('first_name', firstName);\r\n        addUserData.append('last_name', lastName);\r\n        addUserData.append('email', email);\r\n        addUserData.append('mobile_no', mobileNo);\r\n        addUserData.append('selected_role', selectedRole);\r\n        addUserData.append('username', username);\r\n        addUserData.append('password', confirmPassword);\r\n\r\n        // API call to add user\r\n        fetch(`${process.env.REACT_APP_API_URL}/users.php?action=add`, {\r\n            method: \"POST\",\r\n            body: addUserData,\r\n        })\r\n        .then((response) => response.json())\r\n        .then((data) => {\r\n            if (data.status === \"success\") {\r\n                // Update the department list\r\n                this.setState((prevState) => ({\r\n                    users: [...(prevState.users || []), data.data], // Assuming the backend returns the new department\r\n                    employeeId: \"\",\r\n                    firstName: \"\",\r\n                    lastName: \"\",\r\n\t\t\t\t\temail: \"\",\r\n\t\t\t\t\tmobileNo: \"\",\r\n\t\t\t\t\tselectedRole:\"\",\r\n\t\t\t\t\tusername: \"\",\r\n\t\t\t\t\tpassword: \"\",\r\n\t\t\t\t\tconfirmPassword: \"\"\r\n                }));\r\n            } else {\r\n                console.log(\"Failed to add user\");\r\n            }\r\n        })\r\n        .catch((error) => console.error(\"Error:\", error));\r\n    };\r\n\r\n\trender() {\r\n\t\tconst { fixNavbar } = this.props;\r\n\t\tconst { activities, error, employeeData, selectedStatus } = this.state;\r\n\t\treturn (\r\n\t\t\t<>\r\n\t\t\t\t{/* <link rel=\"stylesheet\" href=\"../assets/plugins/summernote/dist/summernote.css\" /> */}\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<div className={`section-body ${fixNavbar ? \"marginTop\" : \"\"} mt-3`}>\r\n\t\t\t\t\t\t<div className=\"container-fluid\">\r\n\t\t\t\t\t\t\t<div className=\"row clearfix\">\r\n\t\t\t\t\t\t\t\t<div className=\"col-md-12\">\r\n\t\t\t\t\t\t\t\t\t<div className=\"card\">\r\n\t\t\t\t\t\t\t\t\t\t<div className=\"card-header\">\r\n\t\t\t\t\t\t\t\t\t\t\t<h3 className=\"card-title\">Timeline Activity</h3>\r\n\t\t\t\t\t\t\t\t\t\t\t<button type=\"button\" className=\"btn btn-primary\" data-toggle=\"modal\" data-target=\"#addBreakModal\"><i className=\"fe fe-plus mr-2\" />Add Break</button>\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t<div className=\"card-body\">\r\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"summernote\">\r\n\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t{activities.length > 0 ? (\r\n\t\t\t\t\t\t\t\t\t\t\t\tactivities.map((activity, index) => (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"timeline_item \">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<img\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"tl_avatar\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsrc=\"../assets/images/xs/avatar1.jpg\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\talt=\"fake_url\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<a href=\"#\">{activity.first_name} {activity.last_name}</a> {activity.location}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<small className=\"float-right text-right\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{activity.formatted_date}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</small>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<h6 className=\"font600\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t({activity.break_status}) {activity.break_reason}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</h6>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t))\r\n\t\t\t\t\t\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t\t\t\t\t\terror && <p>{error}</p>\r\n\t\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t{/* Add Break Modal */}\r\n\t\t\t\t\t<div className=\"modal fade\" id=\"addBreakModal\" tabIndex={-1} role=\"dialog\" aria-labelledby=\"addBreakModalLabel\" /* aria-hidden=\"true\" */>\r\n\t\t\t\t\t\t<div className=\"modal-dialog\" role=\"break\">\r\n\t\t\t\t\t\t\t<div className=\"modal-content\">\r\n\t\t\t\t\t\t\t\t<div className=\"modal-header\">\r\n\t\t\t\t\t\t\t\t\t<h5 className=\"modal-title\" id=\"addBreakModalLabel\">Add Break</h5>\r\n\t\t\t\t\t\t\t\t\t<button type=\"button\" className=\"close\" data-dismiss=\"modal\" aria-label=\"Close\"><span aria-hidden=\"true\">Ã—</span></button>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t<div className=\"modal-body\">\r\n\t\t\t\t\t\t\t\t\t<div className=\"row clearfix\">\r\n\t\t\t\t\t\t\t\t\t\t<div className=\"col-md-12\">\r\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"form-group\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<select className=\"form-control show-tick\" name=\"employee\" id=\"emp_id\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<option value=\"\">Select Employee</option>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t{employeeData.length > 0 ? (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\temployeeData.map((employee, index) => (\r\n\t\t\t\t\t\t\t\t\t\t\t\t      <option value={employee.id}>{`${employee.first_name} ${employee.last_name}`}</option>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t))\r\n\t\t\t\t\t\t\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t!error && <option value=\"\">Select Employee</option>\r\n\t\t\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t\t\t\t</select>\r\n\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t<div className=\"col-md-12\">\r\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"form-group\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<select className=\"form-control show-tick\" name=\"status\" id=\"break_status\" value={selectedStatus} onChange={this.handleStatusChange}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<option value=\"\">Select Status</option>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<option value=\"active\">Break In</option>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<option value=\"completed\">Break Out</option>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</select>\r\n\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t{selectedStatus === \"active\" && (\r\n\t\t\t\t\t\t\t\t\t\t<div className=\"col-md-12\">\r\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"form-group\">\r\n\t\t\t\t\t\t\t\t\t\t\t<textarea className=\"form-control\" name=\"reason\" placeholder=\"Reason\" aria-label=\"With textarea\" id=\"break_reason\" />\r\n\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t<div className=\"modal-footer\">\r\n\t\t\t\t\t\t\t\t\t<button type=\"button\" className=\"btn btn-secondary\" data-dismiss=\"modal\">Close</button>\r\n\t\t\t\t\t\t\t\t\t<button type=\"button\" className=\"btn btn-primary\" onClick={this.addBreak}>Save changes</button>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t</div>\r\n\t\t\t</>\r\n\t\t);\r\n\t}\r\n}\r\nconst mapStateToProps = state => ({\r\n\tfixNavbar: state.settings.isFixNavbar\r\n})\r\n\r\nconst mapDispatchToProps = dispatch => ({})\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Activities);"]},"metadata":{},"sourceType":"module"}