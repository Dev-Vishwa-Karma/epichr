{"ast":null,"code":"var _jsxFileName = \"/opt/lampp/htdocs/epicpro-frontend/src/components/HRMS/Activities/Activities.js\";\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport Ckeditor from '../../common/ckeditor';\nimport { useState } from \"react\";\n\nclass Activities extends Component {\n  constructor(props) {\n    super(props);\n\n    this.handleEmployeeChange = event => {\n      this.setState({\n        selectedEmployee: event.target.value\n      });\n    };\n\n    this.handleStatusChange = event => {\n      this.setState({\n        selectedStatus: event.target.value\n      });\n    };\n\n    this.handleReasonChange = event => {\n      this.setState({\n        breakReason: event.target.value\n      });\n    };\n\n    this.addBreak = () => {\n      const {\n        selectedEmployee,\n        selectedStatus,\n        breakReason\n      } = this.state; // Validate form inputs\n\n      if (!selectedEmployee || !selectedStatus) {\n        alert(\"All the fields are required\");\n        return;\n      }\n\n      const formData = new FormData();\n      formData.append('employee_id', selectedEmployee);\n      formData.append('break_status', selectedStatus);\n      formData.append('break_reason', breakReason); // API call to add break\n\n      fetch(`${process.env.REACT_APP_API_URL}/activities.php?action=add`, {\n        method: \"POST\",\n        body: formData\n      }).then(response => response.json()).then(data => {\n        if (data.status === \"success\") {\n          alert(data.message); // Close the modal\n\n          document.querySelector(\"#addBreakModal .close\").click();\n          this.componentDidMount();\n        } else {\n          alert(data.message);\n          console.log(\"Failed to add break data\");\n        }\n      }).catch(error => console.error(\"Error:\", error));\n    };\n\n    this.state = {\n      activities: [],\n      error: null,\n      employeeData: [],\n      selectedStatus: \"\",\n      // State for dropdown selection\n      selectedEmployee: \"\",\n      breakReason: \"\"\n    };\n  }\n\n  componentDidMount() {\n    // Make the GET API call when the component is mounted\n    // fetch('http://localhost/react/epicpro-backend/users.php')\n    fetch(`${process.env.REACT_APP_API_URL}/activities.php`).then(response => response.json()).then(data => {\n      if (data.status === 'success') {\n        this.setState({\n          activities: data.data\n        });\n      } else {\n        this.setState({\n          error: data.message\n        });\n      }\n    }).catch(err => {\n      this.setState({\n        error: 'Failed to fetch data'\n      });\n      console.error(err);\n    });\n    /** Get employees list */\n\n    fetch(`${process.env.REACT_APP_API_URL}/get_employees.php`).then(response => response.json()).then(data => {\n      if (data.status === 'success') {\n        this.setState({\n          employeeData: data.data\n        });\n      } else {\n        this.setState({\n          error: data.message\n        });\n      }\n    }).catch(err => {\n      this.setState({\n        error: 'Failed to fetch data'\n      });\n      console.error(err);\n    });\n  } // Handle dropdown change for employee\n\n\n  render() {\n    const {\n      fixNavbar\n    } = this.props;\n    const {\n      activities,\n      error,\n      employeeData,\n      selectedStatus,\n      selectedEmployee,\n      breakReason\n    } = this.state;\n    return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 5\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: `section-body ${fixNavbar ? \"marginTop\" : \"\"} mt-3`,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 6\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"container-fluid\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row clearfix\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 8\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-12\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 110,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"card\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 10\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"card-header\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"h3\", {\n      className: \"card-title\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 12\n      }\n    }, \"Timeline Activity\"), /*#__PURE__*/React.createElement(\"h3\", {\n      className: \"card-title\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 12\n      }\n    }, \"Timeline Activity\")), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"card-body\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"summernote\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 12\n      }\n    }), activities.length > 0 ? activities.map((activity, index) => /*#__PURE__*/React.createElement(\"div\", {\n      className: \"timeline_item \",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 122,\n        columnNumber: 14\n      }\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      className: \"tl_avatar\",\n      src: \"../assets/images/xs/avatar1.jpg\",\n      alt: \"fake_url\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 123,\n        columnNumber: 15\n      }\n    }), /*#__PURE__*/React.createElement(\"span\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 128,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"a\", {\n      href: \"#\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 129,\n        columnNumber: 16\n      }\n    }, activity.first_name, \" \", activity.last_name), \" \", activity.location, /*#__PURE__*/React.createElement(\"small\", {\n      className: \"float-right text-right\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 130,\n        columnNumber: 16\n      }\n    }, activity.formatted_date)), /*#__PURE__*/React.createElement(\"h6\", {\n      className: \"font600\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 134,\n        columnNumber: 15\n      }\n    }, \"(\", activity.break_status, \") \", activity.break_reason))) : error && /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 140,\n        columnNumber: 22\n      }\n    }, error))))))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"modal fade\",\n      id: \"addBreakModal\",\n      tabIndex: -1,\n      role: \"dialog\",\n      \"aria-labelledby\": \"addBreakModalLabel\"\n      /* aria-hidden=\"true\" */\n      ,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 150,\n        columnNumber: 6\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"modal-dialog\",\n      role: \"break\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 151,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"modal-content\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 152,\n        columnNumber: 8\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"modal-header\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 153,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"h5\", {\n      className: \"modal-title\",\n      id: \"addBreakModalLabel\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 154,\n        columnNumber: 10\n      }\n    }, \"Add Break\"), /*#__PURE__*/React.createElement(\"button\", {\n      type: \"button\",\n      className: \"close\",\n      \"data-dismiss\": \"modal\",\n      \"aria-label\": \"Close\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 155,\n        columnNumber: 10\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      \"aria-hidden\": \"true\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 155,\n        columnNumber: 90\n      }\n    }, \"\\xD7\"))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"modal-body\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 157,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row clearfix\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 158,\n        columnNumber: 10\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-12\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 159,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 160,\n        columnNumber: 12\n      }\n    }, /*#__PURE__*/React.createElement(\"select\", {\n      className: \"form-control\",\n      value: selectedEmployee,\n      onChange: this.handleEmployeeChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 161,\n        columnNumber: 12\n      }\n    }, /*#__PURE__*/React.createElement(\"option\", {\n      value: \"\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 162,\n        columnNumber: 14\n      }\n    }, \"Select Employee\"), employeeData.length > 0 ? employeeData.map((employee, index) => /*#__PURE__*/React.createElement(\"option\", {\n      key: index,\n      value: employee.id,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 165,\n        columnNumber: 16\n      }\n    }, `${employee.first_name} ${employee.last_name}`)) : /*#__PURE__*/React.createElement(\"option\", {\n      value: \"\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 170,\n        columnNumber: 15\n      }\n    }, \"No Employees Available\")))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-12\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 175,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 176,\n        columnNumber: 12\n      }\n    }, /*#__PURE__*/React.createElement(\"select\", {\n      className: \"form-control\",\n      value: selectedStatus,\n      onChange: this.handleStatusChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 177,\n        columnNumber: 12\n      }\n    }, /*#__PURE__*/React.createElement(\"option\", {\n      value: \"\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 178,\n        columnNumber: 14\n      }\n    }, \"Select Status\"), /*#__PURE__*/React.createElement(\"option\", {\n      value: \"active\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 179,\n        columnNumber: 14\n      }\n    }, \"Break In\"), /*#__PURE__*/React.createElement(\"option\", {\n      value: \"completed\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 180,\n        columnNumber: 14\n      }\n    }, \"Break Out\")))), selectedStatus === \"active\" && /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-12\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 185,\n        columnNumber: 12\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 186,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"textarea\", {\n      className: \"form-control\",\n      placeholder: \"Reason\",\n      value: breakReason,\n      onChange: this.handleReasonChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 187,\n        columnNumber: 14\n      }\n    }))))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"modal-footer\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 198,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      type: \"button\",\n      className: \"btn btn-secondary\",\n      \"data-dismiss\": \"modal\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 199,\n        columnNumber: 10\n      }\n    }, \"Close\"), /*#__PURE__*/React.createElement(\"button\", {\n      type: \"button\",\n      className: \"btn btn-primary\",\n      onClick: this.addBreak,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 200,\n        columnNumber: 10\n      }\n    }, \"Save changes\")))))));\n  }\n\n}\n\nconst mapStateToProps = state => ({\n  fixNavbar: state.settings.isFixNavbar\n});\n\nconst mapDispatchToProps = dispatch => ({});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Activities);","map":{"version":3,"sources":["/opt/lampp/htdocs/epicpro-frontend/src/components/HRMS/Activities/Activities.js"],"names":["React","Component","connect","Ckeditor","useState","Activities","constructor","props","handleEmployeeChange","event","setState","selectedEmployee","target","value","handleStatusChange","selectedStatus","handleReasonChange","breakReason","addBreak","state","alert","formData","FormData","append","fetch","process","env","REACT_APP_API_URL","method","body","then","response","json","data","status","message","document","querySelector","click","componentDidMount","console","log","catch","error","activities","employeeData","err","render","fixNavbar","length","map","activity","index","first_name","last_name","location","formatted_date","break_status","break_reason","employee","id","mapStateToProps","settings","isFixNavbar","mapDispatchToProps","dispatch"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport Ckeditor from '../../common/ckeditor';\r\nimport { useState } from \"react\";\r\nclass Activities extends Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.state = {\r\n\t\t\tactivities: [],\r\n\t\t\terror: null,\r\n\t\t\temployeeData: [],\r\n\t\t\tselectedStatus: \"\", // State for dropdown selection\r\n\t\t\tselectedEmployee: \"\",\r\n\t\t\tbreakReason: \"\"\r\n\t\t};\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n\t\t// Make the GET API call when the component is mounted\r\n\t\t// fetch('http://localhost/react/epicpro-backend/users.php')\r\n\t\tfetch(`${process.env.REACT_APP_API_URL}/activities.php`)\r\n\t\t\t.then(response => response.json())\r\n\t\t\t.then(data => {\r\n\t\t\t\tif (data.status === 'success') {\r\n\t\t\t\t\tthis.setState({ activities: data.data });\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.setState({ error: data.message });\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\t.catch(err => {\r\n\t\t\t\tthis.setState({ error: 'Failed to fetch data' });\r\n\t\t\t\tconsole.error(err);\r\n\t\t\t});\r\n\r\n\t\t/** Get employees list */\r\n\t\tfetch(`${process.env.REACT_APP_API_URL}/get_employees.php`)\r\n\t\t\t.then(response => response.json())\r\n\t\t\t.then(data => {\r\n\t\t\t\tif (data.status === 'success') {\r\n\t\t\t\t\tthis.setState({ employeeData: data.data });\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.setState({ error: data.message });\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\t.catch(err => {\r\n\t\t\t\tthis.setState({ error: 'Failed to fetch data' });\r\n\t\t\t\tconsole.error(err);\r\n\t\t\t});\r\n\t}\r\n\r\n\t// Handle dropdown change for employee\r\n\thandleEmployeeChange = (event) => {\r\n\t\tthis.setState({ selectedEmployee: event.target.value });\r\n\t};\r\n\r\n\t// Handle dropdown change\r\n\thandleStatusChange = (event) => {\r\n\t\tthis.setState({ selectedStatus: event.target.value });\r\n\t};\r\n\r\n\t// Handle textarea input change\r\n\thandleReasonChange = (event) => {\r\n\t\tthis.setState({ breakReason: event.target.value });\r\n\t};\r\n\r\n\taddBreak = () => {\r\n\t\tconst { selectedEmployee, selectedStatus, breakReason } = this.state;\r\n\r\n\t\t// Validate form inputs\r\n        if (!selectedEmployee || !selectedStatus) {\r\n            alert(\"All the fields are required\");\r\n            return;\r\n        }\r\n\r\n\t\tconst formData = new FormData();\r\n        formData.append('employee_id', selectedEmployee);\r\n        formData.append('break_status', selectedStatus);\r\n        formData.append('break_reason', breakReason);\r\n\r\n\t\t// API call to add break\r\n        fetch(`${process.env.REACT_APP_API_URL}/activities.php?action=add`, {\r\n            method: \"POST\",\r\n            body: formData,\r\n        })\r\n        .then((response) => response.json())\r\n        .then((data) => {\r\n            if (data.status === \"success\") {\r\n\t\t\t\talert(data.message);\r\n\t\t\t\t// Close the modal\r\n                document.querySelector(\"#addBreakModal .close\").click();\r\n\t\t\t\tthis.componentDidMount();\r\n            } else {\r\n\t\t\t\talert(data.message);\r\n                console.log(\"Failed to add break data\");\r\n            }\r\n        })\r\n        .catch((error) => console.error(\"Error:\", error));\r\n    };\r\n\r\n\trender() {\r\n\t\tconst { fixNavbar } = this.props;\r\n\t\tconst { activities, error, employeeData, selectedStatus, selectedEmployee, breakReason } = this.state;\r\n\t\treturn (\r\n\t\t\t<>\r\n\t\t\t\t{/* <link rel=\"stylesheet\" href=\"../assets/plugins/summernote/dist/summernote.css\" /> */}\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<div className={`section-body ${fixNavbar ? \"marginTop\" : \"\"} mt-3`}>\r\n\t\t\t\t\t\t<div className=\"container-fluid\">\r\n\t\t\t\t\t\t\t<div className=\"row clearfix\">\r\n\t\t\t\t\t\t\t\t<div className=\"col-md-12\">\r\n\t\t\t\t\t\t\t\t\t<div className=\"card\">\r\n\t\t\t\t\t\t\t\t\t\t<div className=\"card-header\">\r\n\t\t\t\t\t\t\t\t\t\t\t<h3 className=\"card-title\">Timeline Activity</h3>\r\n\t\t\t\t\t\t\t\t\t\t\t<h3 className=\"card-title\">Timeline Activity</h3>\r\n\t\t\t\t\t\t\t\t\t\t\t{/* <button type=\"button\" className=\"btn btn-primary\" data-toggle=\"modal\" data-target=\"#addBreakModal\"><i className=\"fe fe-plus mr-2\" />Add Break</button> */}\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t<div className=\"card-body\">\r\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"summernote\">\r\n\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t{activities.length > 0 ? (\r\n\t\t\t\t\t\t\t\t\t\t\t\tactivities.map((activity, index) => (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"timeline_item \">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<img\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"tl_avatar\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsrc=\"../assets/images/xs/avatar1.jpg\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\talt=\"fake_url\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<a href=\"#\">{activity.first_name} {activity.last_name}</a> {activity.location}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<small className=\"float-right text-right\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{activity.formatted_date}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</small>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<h6 className=\"font600\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t({activity.break_status}) {activity.break_reason}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</h6>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t))\r\n\t\t\t\t\t\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t\t\t\t\t\terror && <p>{error}</p>\r\n\t\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t{/* Add Break Modal */}\r\n\t\t\t\t\t<div className=\"modal fade\" id=\"addBreakModal\" tabIndex={-1} role=\"dialog\" aria-labelledby=\"addBreakModalLabel\" /* aria-hidden=\"true\" */>\r\n\t\t\t\t\t\t<div className=\"modal-dialog\" role=\"break\">\r\n\t\t\t\t\t\t\t<div className=\"modal-content\">\r\n\t\t\t\t\t\t\t\t<div className=\"modal-header\">\r\n\t\t\t\t\t\t\t\t\t<h5 className=\"modal-title\" id=\"addBreakModalLabel\">Add Break</h5>\r\n\t\t\t\t\t\t\t\t\t<button type=\"button\" className=\"close\" data-dismiss=\"modal\" aria-label=\"Close\"><span aria-hidden=\"true\">×</span></button>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t<div className=\"modal-body\">\r\n\t\t\t\t\t\t\t\t\t<div className=\"row clearfix\">\r\n\t\t\t\t\t\t\t\t\t\t<div className=\"col-md-12\">\r\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"form-group\">\r\n\t\t\t\t\t\t\t\t\t\t\t<select className=\"form-control\" value={selectedEmployee} onChange={this.handleEmployeeChange}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<option value=\"\">Select Employee</option>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t{employeeData.length > 0 ? (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\temployeeData.map((employee, index) => (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<option key={index} value={employee.id}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{`${employee.first_name} ${employee.last_name}`}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</option>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t))\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<option value=\"\">No Employees Available</option>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t\t\t\t</select>\r\n\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t<div className=\"col-md-12\">\r\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"form-group\">\r\n\t\t\t\t\t\t\t\t\t\t\t<select className=\"form-control\" value={selectedStatus} onChange={this.handleStatusChange}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<option value=\"\">Select Status</option>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<option value=\"active\">Break In</option>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<option value=\"completed\">Break Out</option>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</select>\r\n\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t{selectedStatus === \"active\" && (\r\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"col-md-12\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"form-group\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<textarea\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"form-control\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tplaceholder=\"Reason\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalue={breakReason}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tonChange={this.handleReasonChange}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t<div className=\"modal-footer\">\r\n\t\t\t\t\t\t\t\t\t<button type=\"button\" className=\"btn btn-secondary\" data-dismiss=\"modal\">Close</button>\r\n\t\t\t\t\t\t\t\t\t<button type=\"button\" className=\"btn btn-primary\" onClick={this.addBreak}>Save changes</button>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t</div>\r\n\t\t\t</>\r\n\t\t);\r\n\t}\r\n}\r\nconst mapStateToProps = state => ({\r\n\tfixNavbar: state.settings.isFixNavbar\r\n})\r\n\r\nconst mapDispatchToProps = dispatch => ({})\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Activities);"]},"metadata":{},"sourceType":"module"}